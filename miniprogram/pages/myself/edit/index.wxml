<view class="container">
    
    <view class="profile-header">
        <view class="avatar-wrap" bindtap="chooseAvatar">
            <image 
                class="avatar" 
                src="{{userInfo.avatarUrl}}" 
                mode="aspectFill"
            />
     
       </view>
    </view>

    <view class="form-list">
        <view class="form-item">
            <text class="label">昵称</text>
            <input 
                class="input" 
                placeholder="请填写" 
                placeholder-class="placeholder" 
  
                value="{{formData.nickname}}" 
                bindinput="handleInput" 
                data-field="nickname"
            />
        </view>

        <view class="form-item mobile-item">
            <text class="label">手机号</text>
         
           <block wx:if="{{userInfo.mobile && !showMobileChangeForm}}">
                <view class="mobile-bound">
                    <text>{{userInfo.mobileMask}}</text>
                    <button 
                        class="btn-change-mobile" 
           
                        bindtap="toggleMobileChange"
                    >
                        更换手机号
                    </button>
                </view>
       
             </block>
            <block wx:else>
                <input 
                    class="input mobile-input" 
                    placeholder="{{userInfo.mobile ?'请输入新手机号' : '请输入手机号'}}" 
                    placeholder-class="placeholder" 
                    value="{{formData.newMobile}}" 
                    bindinput="handleInput" 
                    data-field="newMobile"
              
                    type="number" 
                    maxlength="11"
                />
                <button 
                    class="btn-send-sms" 
                   
                    disabled="{{!isNewMobileValid || countdown > 0}}" 
                    bindtap="sendSmsCode"
                >
                    {{countdown > 0 ? countdown + 's后重发' : '发送短信'}}
                </button>
            </block>
  
           </view>
        
        <view 
            class="form-item" 
            wx:if="{{!userInfo.mobile || showMobileChangeForm}}">
            <text class="label">验证码</text>
            <input 
                class="input" 
                placeholder="请输入验证码" 
                placeholder-class="placeholder" 
               
                value="{{formData.smsCode}}" 
                bindinput="handleInput" 
                data-field="smsCode"
                type="number" 
                maxlength="6"
            />
        </view>

        <view class="form-item">
   
             <text class="label">性别</text>
            <view class="radio-group-wrap">
                <radio-group bindchange="handleRadioChange" data-field="gender">
                    <label class="radio-label">
                        <radio value="male" checked="{{formData.gender === 'male'}}" color="#ff4500" />男
        
                    </label>
                    <label class="radio-label">
                        <radio value="female" checked="{{formData.gender === 'female'}}" color="#ff4500" />女
                    </label>
                </radio-group>
 
             </view>
        </view>

        <picker mode="date" value="{{formData.birthday}}" start="1900-01-01" end="{{today}}" bindchange="handlePickerChange" data-field="birthday">
            <view class="form-item item-link">
                <text class="label">生日</text>
                <text class="value placeholder">{{formData.birthday ||
                    '请选择'}}</text>
            </view>
        </picker>

    </view>
    
    <view class="btn-group">
        <button 
            class="btn-save" 
            bindtap="submitForm"
            disabled="{{isSubmitting}}" 
        >
            {{isSubmitting ? '保存中...' : '保存'}}
        </button>
    </view>
</view>