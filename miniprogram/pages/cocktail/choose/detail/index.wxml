<view class="container">
    <view class="order-card">
        <scroll-view class="product-list-scroll" scroll-y>
            <view class="product-list">
                <view class="product-item" wx:for="{{orderItems}}" wx:key="id">
                    <image class="product-image" src="{{item.image}}" mode="aspectFill"></image>
                    <view class="product-info">
                        <view class="product-name">{{item.name}}</view>
                        <view class="product-spec-row">
                            <text wx:if="{{item.formattedSpec}}" class="product-spec">{{item.formattedSpec}}</text>
                        </view>
                    </view>
                    <view class="product-price-quantity">
                        <view class="product-price">¥{{item.price}}/ml</view>
                        <view class="product-quantity">x{{item.quantity}}</view>
                    </view>
                </view>
            </view>
        </scroll-view>

        <view class="summary">
            <text>共{{totalCount}}ml，合计</text>
            <text class="summary-total">¥{{totalAmount}}</text>
        </view>
    </view>

    <view class="remark-card">
        <view class="remark-left">
            <textarea
                class="remark-textarea"
                placeholder="请输入制作流程"
                value="{{remark}}"
                bindinput="onRemarkInput"
                maxlength="200"
            />
        </view>
        
        <view class="remark-right">
            <view class="upload-btn" bindtap="onChooseImage">
                <text class="plus-icon">+</text>
                <text class="upload-text">上传</text>
            </view>

            <view class="image-list">
                <view class="uploaded-image-wrapper" wx:for="{{uploadedImages}}" wx:key="*this">
                    <image class="uploaded-image" src="{{item}}" mode="aspectFill"></image>
                </view>
            </view>
        </view>
    </view>
    </view>

<view class="footer-bar-placeholder"></view>
<view class="footer-bar">
    <view class="total-display">
        <text class="total-label">待支付</text>
        <text class="total-amount">¥{{totalAmount}}</text>
    </view>
    <button class="submit-btn" bindtap="onSubmitOrder" disabled="{{isSubmitting}}">
        提交配方
    </button>
</view>